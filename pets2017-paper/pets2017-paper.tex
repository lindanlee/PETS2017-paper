\documentclass[USenglish,oneside,twocolumn]{article}
\usepackage{color}
\usepackage[hyphens]{url}
\usepackage{longtable}
\usepackage{graphicx}
\usepackage{enumitem}
\usepackage{pdfpages}
%\usepackage{hyperref}

\usepackage[utf8]{inputenc}%(only for the pdftex engine)
%\RequirePackage[no-math]{fontspec}%(only for the luatex or the xetex engine)
\usepackage[big]{dgruyter_NEW}
 
\DOI{foobar}

\cclogo{\includegraphics{by-nc-nd.pdf}}

% Format a participant quotation.
\newcommand{\pquote}[2]{
\begin{quotation}
\noindent #1:~\textit{``#2''}
\end{quotation}
}
  
\begin{document}
 
  \author*[1]{Linda Lee}

  \author[2]{David Fifield}

  \author[3]{Nathan Malkin}

  \author[4]{Ganesh Iyer}

  \author[5]{Serge Egelman}
  
  \author[6]{David Wagner}

  \affil[1]{University of California Berkeley, E-mail: \mbox{lnl@cs.berkeley.edu}}

  \affil[2]{University of California Berkeley, E-mail: \mbox{fifield@cs.berkeley.edu}}

  \affil[3]{University of California Berkeley, E-mail: \mbox{nmalkin@cs.berkeley.edu}}

  \affil[4]{University of California Berkeley, E-mail: \mbox{ganesh.v@berkeley.edu}}
  
  \affil[5]{University of California Berkeley and International Computer Science Institute, E-mail: \mbox{egelman@cs.berkeley.edu}}
   
  \affil[6]{University of California Berkeley, E-mail: \mbox{daw@cs.berkeley.edu}}

  \title{\huge Tor's Usability for Censorship Circumvention}
  %Internet Freedom Made Easy: On Improving Torâ€™s Usability for Censorship Circumvention
  %Towards Usable Censorship Circumvention

  \runningtitle{Tor's Usability for Censorship Circumvention}

  %\subtitle{...}

  \begin{abstract}
{Tor has grown beyond its original purpose as an anonymity tool and has 
become a widely-used censorship circumvention tool.
This is the first study to examine Tor's usability in this role.
We evaluate, design, and test the Tor configuration interface by
placing users in simulated censorship environments, instructing them to use Tor
to circumvent censorship, and measuring their interactions with the interface.
A 16-participant qualitative user study identifies common user struggles while circumventing censorship.
We use the results as feedback to redesign the configuration interface.
A 116-participant quantitative user study tests the impact of our changes.
We find that our changes result in a significant reduction 
in the time spent configuring a connection, while maintaining the same rate of success. We
conclude with recommendations for changes to the current configuration interface and discuss
alternative configuration processes with different balances of risk, automation, and user input.}
\end{abstract}
  \keywords{User Studies, Tor, Security, Censorship, Anonymity}
%  \classification[PACS]{}
 % \communicated{...}
 % \dedication{...}

  \journalname{Proceedings on Privacy Enhancing Technologies}
\DOI{Editor to enter DOI}
  \startpage{1}
  \received{..}
  \revised{..}
  \accepted{..}

  \journalyear{2015}
  \journalvolume{2015}
  \journalissue{2}

\maketitle

\section{Introduction}


Tor is an anonymity network that routes traffic through a series of relays
that make it difficult to observe the source and destination~\cite{dingledine2004tor}. Tor's anonymizing functionality also circumvents censorship. Using Tor for censorship circumvention became sufficiently common that many countries attempt to block Tor for this reason~\cite{winter2012great}. Today, Tor explicitly provides support for censorship circumvention through a network of unlisted relays as entry points into the Tor network, various methods of obfuscation to make connections to the Tor network less obvious, and advanced techniques to resist blocking.
 
This is the first user study that investigates the usability of Tor as a censorship circumvention tool. Our experiments are both a case study observing users circumvent censorship and a step toward helping current Tor users by making censorship circumvention easier. All Tor users benefit from improving the configuration interface, and thereby increasing the adoption of Tor as a censorship circumvention tool. Users who successfully use Tor to circumvent censorship are provided with extra security features that other censorship circumvention tools do not provide, while users who use Tor as an anonymity system benefit from an increased number of overall users on the Tor network~\cite{dingledine2006anonymity}.

We evaluate, redesign, and test Tor's configuration interface by
measuring participants' interactions with the interface in various censorship environments.
The first user study is a small-scale, qualitative experiment that collected 
behavioral patterns and failure cases with the interface through user observations
and interviews (Section~\ref{sec:qualitative}). This feedback was used to make changes to the interface (Section~\ref{redesign}). The second user study is a large-scale, quantitative experiment
that collected data on user interactions with the interface to quantify the impact of the design changes (Section~\ref{sec:quantitative}).

We find that users do not know if they require additional configuration to circumvent censorship, make incorrect assumptions based on interface layout, and do not know what to do in the event of a failure. We redesign the interface to decrease the technical knowledge required, give explicit advice on configuring network components, and fix misleading feedback that causes users to assume they are wrong when they are right. Our changes decreased the time participants spent configuring their connections, with no difference in success rates. We conclude with recommendations of changes that we believe will help the most users circumvent censorship and connect to Tor. 

\section{Related Work} 
There have been three published user studies on Tor. Clark et~al.~\cite{clark2007usability} examined various deployment
options for Tor Browser, such as Vidalia, Privoxy, Torbutton, and FoxyProxy, and found that none had satisfactory from a usability. Fabian et~al.~\cite{fabian2010privately} show that Tor's added
latency~\cite{dingledine2009performance} causes users
to be frustrated, cancel requests, and prevents user adoption. 
Norcie et~al.~\cite{norcie2012eliminating} found found that 
64\% of users are unable to continue with installation or browsing at least once due to difficulties.

We do not know of any published usability evaluations of
Tor Browser since the release of the 3.5 series in 2013, which introduced radical UI changes~\cite{torbrowser-35}.
The most recent effort is an unpublished pilot study by Lee and Fifield~\cite{uxsprint} 
that tested the downloading, installation, and browsing tasks in Tor Browser.  This study uncovered a number of issues~\cite{uxsprint2015-tickets},
some of which influenced changes in Tor Browser version~4.5 and later.

Previous user studies have considered the whole browsing experience,
without focusing on specific features in isolation.
Our study focuses on 
the browser's configuration interface, which guides users through setting up network components required to circumvent censorship. 

\section{Background}
This section provides the necessary background the configuration interface relates to Tor, the network components that are involved in censorship circumvention, and the configuration settings are required to bypass levels of Tor-adverse censorship environments. 

\subsection{Tor, Tor Browser, and Tor Launcher}
The recommended way to use Tor is through Tor Browser~\cite{torbrowser},
a modified Firefox browser that includes a built-in Tor client.
Tor Browser has a software component called Tor Launcher that
starts, stops, and otherwise controls the underlying Tor processes.
Tor Launcher's graphical user interface gives access to a variety of 
sophisticated circumvention mechanisms, asking the user
to configure a proxy and bridge (if necessary) before connecting to Tor
for the first time. This is the object of our study. 

In principle, the process of configuring a proxy and bridge can be automated, but
the interface eschews automatic configuration through network probing
in favor of guided manual configuration to give users agency in configuring their connection. 
Automatic configuration through network probing may put some users in certain regimes at risk. 
A knowledgeable user can minimize their network trace and hide that they are connecting to Tor.
However, this requires that the user grapple with technical concepts such as 
bridges, pluggable transports, and proxies. Some of these concepts are specific to 
Tor and not general concepts.

\subsection{Bridges, Pluggable Transports, and Proxies} 
Internet censors seek to block network resources through 
a variety of means, such as falsifying DNS responses, blocking IP addresses, 
filtering keywords, and detecting protocols by deep packet inspection.
Censors can block the Tor network by blocking the list of Tor relays, which 
are public. Blocking Tor becomes challenging when
the Tor network is augmented with \emph{bridges} and \emph{pluggable transports}.
Fig.~\ref{fig:topology} illustrates the interacting components.

\begin{figure}
\centering
\includegraphics{topology.pdf}
\caption{
The chain of components involved in connecting to a website over Tor.
Most users do not need a proxy;
similarly only those users who face a censor need a bridge.
In the diagram, ``Tor'' represents all three anonymizing hops through the Tor network.
We have shown the bridge as a separate component
because of the special role it plays.
When a bridge is used, it takes the place of the first Tor hop.
}
\label{fig:topology}
\end{figure}

Bridges are unlisted Tor relays that make it possible for a user to connect
to the Tor network even if a censor blocks all publicly listed Tor relays.
Pluggable transports are special protocols that run on bridges and obfuscate
Tor's network protocol to make it difficult to detect. 
Configuring a bridge requires providing one or more
``bridge lines,'' a specification of a bridge that
includes its IP address, transport type, and other metadata.
For ease of use, the interface has hard-coded options for 
the user to choose a group of bridges that use a particular
pluggable transport. For example, choosing  the hard-coded obfs3 option
configures a handful of bridges that use obfs3 pluggable transport.
Some censors block the IP addresses of the hard-coded bridges by looking
at the source code for those addresses (except flashproxy and meek).
If the built-in bridges do not work, a user can obtain bridge lines
through out-of-band channels, for instance by email~\cite{bridgedb}.
Fig.~\ref{fig:bridge-options} paraphrases the bridge configuration
options at the time of the study and lists the available pluggable transports.
%Some transports connect directly to a static IP address,
%obfuscating traffic to defeat on-the-wire identification;
%they rely on the secrecy of their IP addresses for their effectiveness.
%These include ``fte'' and ``fte-ipv6''~\cite{fte},
%which make Tor look like another protocol such as HTTP; and
%``obfs3''~\cite{obfs3}, ``obfs4''~\cite{obfs4}, and ``scramblesuit''~\cite{scramblesuit},
%which encrypt Tor to look like random noise.
%Other transports work differently and do not depend on connecting to a static IP address:
%``flashproxy''~\cite{flashproxy} connects through third parties' web browsers,
%and the three ``meek''~\cite{fifield2015blocking} options route traffic
%through content delivery networks.

\begin{figure}
  \centering
    \includegraphics[width=0.5\textwidth]{bridge-options.png}
%\small
%\begin{itemize}
%\renewcommand{\labelitemi}{$\circ$}
%\item Connect with provided bridges\\
%Transport type:
%\begin{itemize}
%\item flashproxy
%\item fte
%\item fte-ipv6
%\item meek-amazon
%\item meek-azure
%\item meek-google
%\item obfs3 (recommended)
%\item obfs4
%\item scramblesuit
%\end{itemize}
%\item Enter custom bridges\qquad\fbox{Help}\\
%\end{itemize}
\caption{
Bridge selection options in Tor Launcher, as it appeared in Tor Browser~5.0.3.
Users are not familiar with the options under ``Transport type'' denote various
built-in circumvention technologies (``pluggable transports'').
Under ``Enter custom bridges,'' there is a space to paste in
a bridge line, obtained out of band.
The ``Help'' button displays instructions on obtaining
bridge lines. 
}
\label{fig:bridge-options}
\end{figure}

In addition to Tor-specific components, a proxy may be necessary to connect 
outside the local network in certain managed environments, such as corporate or university networks.
Configuring a proxy requires providing the proxy protocol, IP address, port, and additional optional
fields. There is no assistance or automation with this process. The user must locate the 
proxy information and correctly input this information into the configuration interface. 
  
%Technically the Tor client, pluggable transport bridge, and proxy are all
%proxies. In this paper, ``proxy'' refers to a local, ordinary unobfuscated proxy such
%as a SOCKS or HTTP proxy. An important distinction is that the local proxy lies within the 
%censor's control.

\subsection{Circumventing Censorship with Tor}
There are many valid configuration settings to connect to the Tor network.
For instance, a user who does not need a bridge or proxy to circumvent censorship
can connect to Tor with a bridge and proxy, provided that they have been configured correctly. 
The minimum amount of configuration required, therefore, the set of valid configuration settings,
vary depending on the censorship environment. In the worst case, users must know or find out:\\

\begin{itemize}
	\item{Whether they are censored} 
	\item{Whether the Tor network is censored by their ISP}
	\item{Which groups of hard-coded bridges work in their environment} 
	\item{If no hard-coded bridges work, how to get and enter a custom bridge} 
	\item{Whether a proxy is required to access the Internet}
	\item{If a proxy is required, and if so, the proxy settings}
\end{itemize}

Uncensored users and users in censorship environments that do not explicitly 
block Tor do not require a bridge or a proxy and can bypass these steps in the configuration process.
Users in censorship environments that explicitly block Tor but have not blocked the 
hard-coded bridges in the Tor Launcher source code are required to use a 
hard-coded bridge or custom bridge to connect to Tor. Users in a censorship environment that has explicitly 
blocked Tor relays and hard-coded bridges are required to configure a meek bridge (which 
routes traffic through content delivery networks and therefore resists blocking through collateral damage) or 
configure a custom bridge to connect to Tor.


\section{Evaluation Criteria and Goals}
\label{sec:goals}
Our user studies evaluated two versions of the Tor Launcher interface.
The first, which we have labeled OLD in our figures and tables,
is the current version being distributed with Tor Browser.
The second, NEW, is the prototype that we designed
in order to provide better usability. Below are the empirical and 
heuristic evaluation criteria we use to assess the interfaces. 

Our empirical evaluation criteria for the Tor Browser configuration
interface are based on common metrics that measure ease of use: \\

\begin{enumerate}
    \item {\bfseries Active configuration time:} how much time a user spends actively configuring network components to connect to Tor, which only includes time spent interacting with the interface, excluding the time waiting for the connection to bootstrap.
    \item {\bfseries  Time to completion:} how long it takes between program startup and a successful Tor bootstrap, which includes time spent searching online for help and waiting for the connection to bootstrap.
    \item {\bfseries Task completion rate:} what percentage of users can successfully connect to Tor in a given condition.
\end{enumerate}

An ideal interface would guide users though the configuration process while communicating system state and managing errors along the way. Users would be able to connect to the Tor network in a couple of minutes. 

\section{Experimental Setup}
\label{sec:environments}
For our experiments, we use instrumented versions of Tor Browser~5.0.3, 
the most recent stable release at the time~\cite{torbrowser-503}.
Though there were new releases during the experiments,
we used the same version across all participants to not introduce
confounding factors.

For both user studies, we simulated three censorship environments,
which we refer to as E1, E2, and E3, which are in  the order of increasing severity.
We designed the environments to be representative
of what, in our estimation, are important real-world
cases of censorship. They are not intended to imitate
any particular country's censorship environment.

\smallskip


\begin{description}
\item[E1: Mild censorship]
(Representative of countries such as France and Australia.)
The E1 environment only blocks some websites,
as if by DNS poisoning.
We blocked subdomains of torproject.org
and wikipedia.org.
(The participants' main goal in the experiment was to read a page on en.wikipedia.org.)
To succeed in this environment,
participants only had to click ``Connect'' on the first screen;
additional configuration was possible but unnecessary.
% (Representative of countries such as France and Australia.)

\item[E2: Intermediate censorship]
(Representative of countries such as Tunisia.)
The E2 environment blocks websites as in E1;
it additionally blocks the IP addresses of public Tor relays
and directory authorities, simulating a censor who knows
about circumvention and tries to stop it.
In this environment, simply clicking ``Connect'' does not work;
participants had to select a built-in bridge
(any type other than ``flashproxy'' would work).
A custom bridge would work but was not necessary.
% (Representative of countries such as Tunisia.)

\item[E3: Comprehensive censorship]
(Representative of countries such as China and Syria.)
The E3 environment blocks websites and Tor relays like E1 and E2
and additionally blocks the built-in default bridge IP addresses
found in the Tor Browser source code.
To succeed in this environment, participants had either to select
one of the ``meek'' built-in bridges (no other type would work),
or to acquire their own custom bridge and enter it manually.
% (Representative of countries such as China and Syria.)
\end{description}

\smallskip

Table~\ref{tab:environments} summarizes our simulated censorship
environments. We used features of the Windows operating system 
to implement the above blocking behaviors.
To simulate website blocking, we added entries to the hosts file,
mapping domain names to the address 127.0.0.1.
For IP address blocking, we used Windows Firewall rules.

\begin{table}
\centering
\begin{tabular}{r c c c}
& E1 & E2 & E3 \\
% \noalign{\hrule}
websites blocked & X & X & X \\
public relays blocked & & X & X \\
default bridges blocked & & & X \\
\end{tabular}
\caption{
Summary of our simulated censorship environments.
E1 only requires participants to click ``Connect'';
E2 requires selection of a built-in bridge;
and E3 requires selection of a specific type of built-in bridge,
or manual configuration of a custom bridge.
E2's blocking is a superset of E1's;
similarly E3's is a superset of E2's.
}
\label{tab:environments}
\end{table}

\section{Qualitative Analysis of the Existing Interface (Study 1)}
\label{sec:qualitative}

We ran a qualitative, exploratory user study to gain an 
understanding of how users interact with the configuration interface and
what common problems may be. We did this by observing participants using 
the interface to circumvent censorship and interviewing them about
their experience.  Our observations during this study guided us in
redesigning the interface and provided hypotheses to test in our quantitative study.

\subsection{Inspection}
We used a combination of usability inspection methods~\cite{nielsen1994usability}
to prepare for the user study. Two researchers conducted a pluralistic 
walkthrough and stepped through various censorship
scenarios, discussing which elements would be involved for that use case, and walking 
through the configuration process. After compiling all the possible paths through the 
interface, researchers performed feature inspection, listing sequences of features used 
to accomplish typical tasks and taking note of long sequences or cumbersome
steps. In addition, we performed a heuristic evaluation to mark tasks
likely to cause confusion for users during our study. 

\subsection{Recruitment}
Using established practices from the field of user experience research~\cite{howmanyusers},
we recruited 16 participants across the three censorship environments:
5~in E1, 5~in E2, and 6~in E3.
We pre-screened~\cite{screening} our participants for diversity of gender, age, technical expertise,
and self-reported familiarity with Tor in each simulated censorship environment for our summative
usability test~\cite{summative}. 

We recruited our users from Craigslist, vaguely stating that we wanted to evaluate some piece of software. 
The recruitment text can be found in Appendix~\ref{qualitative-recruitment}. The recruitment posting contained a 
SurveyGizmo online survey that collected their demographics, technical expertise, and familiarity with Tor.
The complete prescreening survey can be found in Appendix~\ref{qualitative-prescreening}.  
We selected participants in each censorship environment to have at least one person who has never heard of Tor, 
at least one person who has only heard of Tor, and exactly one person who has previously used Tor. We tried to evenly distribute any participants who had technical
expertise or used particular security tools throughout the censorship environments. 

Out of our 16 participants, ages ranged from 20 to~62 years
($\mu = 24.5$, $\sigma = 12.6$). 53.3\% were male. 
93.3\% of our participants had at least
a college education.
4 participants had used Tor before;
5 had heard of Tor but had not used it;
and the remaining 8 had never heard nor used it.


\subsection{Procedure}
The one-hour, single-participant procedure begun when a participant entered a small 
room with a single computer, which is equipped with Tor, Chrome, Firefox, Internet Explorer, and VLC.
Each participant is informed of the risks and purpose of the study.
A researcher informed the participant of the simulated censorship environment and
instruct them to visit sample blocked and unblocked websites
in a standard browser (Appendix~\ref{qualitative-script}). 
This shows participants what a blocked site looks like in a browser. 
Then, the participant was asked to complete a worksheet that gives information
on their censorship environment and instructed them
to visit one blocked website and one non-blocked website (Appendix~\ref{participant-worksheet}).
The worksheet informed the participant that the network is censored,
but did not give details of what services and websites are specifically blocked.
Participants were able to visit the unblocked website using any familiar browser,
but had to configure Tor Browser in order to visit the blocked website.
 
For the blocked website, we used the main page of Wikipedia,
and for the unblocked site we used the CNN homepage.
We chose these two sites because of their likely familiarity to web users;
our goal was to evaluate the user interface, not to test users with a browsing task.
After instructions, the researchers stepped out of the room.There was no interaction
between the participant and researcher for the rest of the session.
Researchers watched a live video of each participant's screen from another room
and saved the videos for review; the resulting videos and summaries
are available from our project page.
Participants had an average of 45 minutes to complete their worksheet. 

After participants completed the browsing tasks or ran out of time,
we interviewed them about their experience,
taking notes of the questions and answers.
We asked three standard questions asking about their general experience, 
interface features they found confusing, and feedback for improvements. We followed up
with specific questions prompted from watching their screen. 
This was to verify any hypotheses we had (e.g. ``they did not know what to do on window~3'').
We paid each participant~\$30 for their time. 

\subsection{Results} 
We discuss six common challenges our participants encountered during the configuration process.
Participant quotations come from live transcription during the post-experiment interview
and are not necessarily verbatim.\\

\noindent {\bfseries Challenge 1: Users did not understand what proxies, bridges, and pluggable transports were.}
Most participants, including those pre-screened for high technical ability and previous experience with Tor, were not familiar with the vocabulary:

\begin{figure}[t]
  \centering
    \includegraphics[width=0.5\textwidth]{error.png}
    \caption{An example of a technical error message which our participants did not understand.}
\label{fig:error}
\end{figure}

\pquote{P2}{I don't know what any of those [list of bridges] means, or what that [proxy] means at all.}
\pquote{P3}{The vocabulary is really challenging, for someone not doing IT work.}

\noindent {\bfseries Challenge 2: Users did not know if they should connect directly or configure a connection.} 
Participants incorrectly determined that a blocked torproject.org website meant that Tor relays were censored, configuring bridges and proxies when they did not need to. Other participants were not able to determine that a failed direct connection to the Tor network was the result of the Tor network being censored. \\

\noindent {\bfseries Challenge 3: Users did not know how to choose which bridge and pluggable transport to use.}
On the bridge configuration screen, participants were confused by the names of the bridge transports. The most common behavior was to configure with the recommended bridge option (obfs3). If the recommended one did not work, participants did not know how to choose another. 

\pquote{P8}{I have no clue what's the difference between flashproxy, fte, etc. I need to know why the built-in ones aren't working. And why do I need a custom bridge if there are options built in?}
\pquote{P7}{Since it (obfs3) said recommended, it helped actually, and I selected it because it was chosen. I saw the custom bridges option, but I didn't know what to enter there so I went with this (obfs3).}

\noindent {\bfseries Challenge 4: Users did not know when they are wrong.} 
Unfortunately, many mistakes did not result in error messages, but warnings that went unnoticed.
When participants did encounter an error message, they did not understand what errors meant (Fig.~\ref{fig:error}).\\

\noindent {\bfseries Challenge 5: Users assumed they are wrong when they are right.}
The progress bar has a bug that causes it to update only when the level of progress increases.
If progress bar reaches a 90\% and fails, the next attempt have regressed to 0\% and remain there until the progress surpasses 90\%. Due to this, participants assumed that their subsequent attempts were wrong, even if they were right.
\pquote{P1}{It was hard to figure out if the progress bar wasn't moving because the connection was censored, or if it was just slow.}
\pquote{P16}{There doesn't seem to be a timeout on any of this stuff. Am I waiting long enough? It should work immediately.}

\noindent {\bfseries Challenge 6: Users assume that proxy is required after a failed connection.} 
All of our participants who failed to connect (5 of 16) failed for this reason. Many mistakenly assumed that they needed a proxy upon failure, because the interface redirects to the proxy screen (the last screen) after failure. 

\pquote{P15}{I didn't know if this computer had any proxy information. I wasn't able to find it if it did.}

From interviewing our participants, we found that these challenges result because users are not familiar with technical or Tor-specific terms, feedback on progress or errors was inconsistent, and the interface did not instruct users on what to do in the event of a failure. 

\section{Redesigning the Configuration Interface}
\label{redesign} 

 \begin{figure*}[t]
	\centering
		\includegraphics[width=.8\textwidth]{bridge-screens.pdf} 
		\caption{In the ``OLD'' interface, users are asked, ``Does your Internet Service Provide (ISP) block or 
		otherwise censor connections to the Tor Network?'' (B1). A ``Yes'' determines that a bridge should 
		be configured and directs to the bridge configuration screen (B2). 
		The ``NEW'' interface gives users advice on configuring bridges
		while giving the option of not configuring a bridge, on one screen (B).} 
\end{figure*} 

\begin{figure*}[t]
	\centering
		\includegraphics[width=.8\textwidth]{proxy-screens.pdf} 
		\caption{In the ``OLD'' interface, users are asked, ``Does this computer need a local proxy to connect
		to the Internet?'' (P1). A ``Yes'' determines that a proxy should be configured and directs to the 
		proxy configuration screen (P2). The ``NEW'' interface checks the local machine's proxy settings,
		and informs the user whether a proxy is required, and if so, what those settings are (P).}
\end{figure*}

Many users struggle with the configuration process. Our changes to the configuration interface address the causes for these issues. These underlying causes are:\\

\begin{enumerate}
\item {\bfseries Users do not know how to connect to Tor.} Participants did not know the difference between a direct connection and an indirect connection to the Tor network or the difference among bridges, pluggable transports, and proxies. Participants did not know how to configure these network components without explicit additional instructions. 
\item {\bfseries Feedback is too technical, missing, or misleading.} Participants did not understand the error messages, log lines, and other text in the interface. Participants did not know when they failed, since certain mistakes do not trigger error warnings or timeouts (i.e. a syntactically correct but invalid proxy). Participants assumed they were not making progress, due to the progress bar not giving feedback on subsequent attempts. 
\item {\bfseries Users do not understand censorship circumvention cues.} Participants did not understand how censorship worked and what would circumvent censorship in their environment, despite adequate evidence that signals what components are necessary and unnecessary. A working connection to the Internet did signal to participants that they did not need a proxy; a blocked website did not translate to a blocked domain name; a failed direct connection did not equate to a blocked Tor relay.
 \end{enumerate} 
 
 \label{redesign}
\begin{figure*}[t]
\centering
\includegraphics[width=.85\textwidth]{old-and-new-flows.png}
\caption{
Comparison of user flow in the ``OLD'' and ``NEW'' interfaces.
We collapsed the two bridge screens into one 
and also collapsed the two proxy screens into one.
We swapped the order of the bridge and proxy configuration
so it matches the order of network components (compare with Fig.~\ref{fig:topology}).
We added a summary screen as a last step before initiating a connection.\\
\textbf{F}: first screen;
\textbf{B/B1/B2}: bridge screens;
\textbf{P/P1/P2}: proxy screens;
\textbf{S}: summary screen;
\textbf{Pr}: progress bar.
}
\label{fig:flow}
\end{figure*} 

To help users know what to do, we made the following changes:\\

\begin{enumerate}
\item {\bfseries Added instructions on what to try next on errors.} When an error occurs, text advice on what to try next is shown to the user. The advice may be to try the connection again, to choose a different bridge, or to try a connection without a proxy. 
\item {\bfseries Added guidance on choosing to connect or configure.} We labeled the configure option specifically for user in heavily censored situations, to urge users to not assume that a website censorship necessitates configuration.
\item {\bfseries Added explicit advice on choosing bridge transports.} The recommended bridge type is still obfs3. We added text that advises users to try a meek bridge if obfs3 does not work. 
\end{enumerate} 

To address feedback that is too technical, missing, or misleading, we made the following changes:\\ 
\begin{enumerate}
\setcounter{enumi}{3}
\item {\bfseries Progress bar feedback is accurate.}  We fixed the bug that caused the progress bar to not update on subsequent attempts. What users now see on the progress bar reflects the reality of the progress. 
\item {\bfseries Made the interface text less technical.} We made the text more task-centric by focusing on instructing users through the configuration process. Since users generally did not understand the technical concepts sufficiently to influence their decisions, we thibk giving direct guidance is a better option. 
\item {\bfseries Added system status visibility.} Before beginning any connection attempt, a summary screen displays the current bridge and proxy settings. The same information is shown on the progress screen while the connection is in progress. We switched the continuous progress bar to a discrete checkpoint-based progress indicator that shows the network components involved in connecting to the Tor network. This aligns with the mental model we are trying to build in the user.
\end{enumerate}

To clarify with interacting network components with censorship circumvention, we made the following changes:\\

\begin{enumerate}
\setcounter{enumi}{6}
\item {\bfseries Eliminated technical questions.}  We removed the gating questions that determined whether a bridge and proxy should be configured, which were highly technical and challenging for users to answer. This are two fewer screens in the revised interface. 
\item {\bfseries Added auto-detection of proxies.} In principle, the interface can guess whether a proxy is needed by scanning the operating system configuration. This purely local detection does not carry the potential risks of network probing and should be safe even for at-risk users. (In our experiment, we simulated the auto-detection by hard-coding the fact that a proxy was not required.)
\item {\bfseries Switched ordering to configure proxies first.} To build users' mental models, network components are now configured in a topologically sequential order, resembling Fig.~\ref{fig:topology} and the new progress screen. Previously, proxies were put after bridge configuration because only a small fraction of users require proxies. With auto-detection, configuring a proxy before a bridge burdens users less than before.
\end{enumerate}

These changes result in a redesigned interface which we refer to as ``NEW.'' Note that the new interface preserves all the functionality of the old interface and still allows users to have control over their own network traffic. 

\section{Quantitative Analyses of the Interfaces (Study 2)}
\label{sec:quantitative}
Having identified problems with the existing interface
and done a redesign in an attempt to ameliorate them,
we quantify the existing problems
and the impact of our changes with a study involving a larger number of users.
We split participants by simulated censorship environments,
and between old and new interfaces.

\subsection{Setup}
We ran our experiment at Xlab~\cite{xlab}, the Experimental Social Science Laboratory at the University of 
California, Berkeley. Xlab has 36 Windows~7 laptops, separated by cubicle walls. 
Though Tor Browser runs on other operating systems,
testing was only done on Windows, as a byproduct of using Xlab. 

We augmented the interfaces with instrumentation 
to log every meaningful interaction
(button presses, menu selections, screen changes).
We wrote scripts to automatically set up the simulated censorship environment, install necessary software, 
start the video recording, and save the logs and videos.
We recorded the participants' computer screens
throughout the experiment to capture non-interface activity such as 
web searching and inspection of system networking settings.

\subsection{Recruitment}
We recruited 124 participants, about 20 for each
condition. We recruited half of our users from Craigslist, and half of our participants from 
the Xlab participant pool. Although Xlab participants are not limited to UC Berkeley students and staff,
a majority of the participants are from campus. For this reason, we chose to recruit 
half of our participants from Craigslist to ensure a diverse set of participants. 
The recruitment text vaguely suggests testing a piece of software, and does not require
that users provide information in advance (Appendix~\ref{quantitative-recruitment}). 
Out of our 124 participants, 59 were recruited from the Xlab pool and the other 65 were
recruited from Craigslist. Ages ranged from 18 to~68 years
($\mu = 28.9$, $\sigma = 12$). 56.8\% were male and 
84.8\% of our participants had at least a college education.

\subsection{Procedure}
The one-hour, multi-participant procedure began when all participants sat at their
respective computers in Xlab. Each computer was equipped with an instrumented old or new version
of Tor Browser, Chrome, Firefox, Internet Explorer,  Chrome, and VLC (for screen recording).
Each computer was assigned one of the six conditions in the beginning of the study. Participants
were assigned to a simulated censorship environment combination at random. 

A researcher informed the participants that they are in a
simulated censorship environment, instructed them to visit a sample blocked website on a 
non-Tor browser of their choice to illustrate the situation, and asked them to 
complete a worksheet that asks to visit one blocked website (Appendix~\ref{quantitative-script}). 
To mirror the qualitative study, we chose Wikipedia's featured article of the day 
as the blocked website to visit on their worksheet. 

After instructions, researchers maintained minimal interactions with the participants, 
only answering logistical questions. Participants had
about 40 minutes to complete their worksheet.
The participants did not know the details of their censorship environment,
only that they are actively being censored. Participants needed to configure Tor Browser to 
circumvent the simulated censorship. 

After users completed the browsing tasks, they took a short exit survey (Appendix~\ref{quantitative-exit-survey})
that collected their demographics. All users were instructed to sit until the end of the experiment,
regardless of when they had completed their task. After the 40 minutes, 
participants were officially informed that their time was up, and were given their payment of 
\$30 for their time. 

\subsection{Results} 
Out of our 124 recruited participants, 116 provided valid data. We have 58 participants who tested the new interface, and 58 who tested the old interface. 38 participants were in E1, 38 participants were in E2, and 40 participants were in E3.
Table~\ref{table:participant-summary} summarizes the rate of success and time to success for our participants' based on their interface version and environment combination. 

\begin{table}
\centering
	% Generated by info.R.
	\begin{tabular}{l r r r r}
	& \multicolumn{2}{c}{success rate} & \multicolumn{1}{c}{median time} \\
	& \multicolumn{2}{c}{after 40 minutes} & \multicolumn{1}{c}{to success} \\
	\noalign{\hrule}
	E1-NEW & 19/19 & 100\% & 0:20 \\ % medians of only finished: 0:20 
	E1-OLD & 19/19 & 100\% & 1:01 \\ %medians of only finished: 1:01
	E2-NEW & 18/19 & 95\% & 3:32 \\ %medians of only finished: 3:22
	E2-OLD & 16/19 & 84\% & 5:00 \\ %medians of only finished: 3:13
	E3-NEW & 13/20 & 65\% & 20:56 \\ %medians of only finished: 12:38
	E3-OLD & 10/20 & 50\% & 40:08 \\ %medians of only finished: 18:16 
	\end{tabular}
\caption{
A summary of participants' success in circumventing censorship
given their simulated censorship environment and version of Tor. Those who
failed to connect successfully were assigned the maximum time of 40:08.
}
\label{table:participant-summary}
\end{table}

\subsubsection{Rate of Success} 
50 of 58 (86\%) participants with the new interface successfully connected to Tor, while 45 of 58 (78\%) participants with the old interface did. 
Due to the limited number of participants, this difference is not large enough to rule out the possibility of random chance being the cause for the difference. This suggests that users no less likely to succeed with the new interface. 
% impact of version on success: not significant (Mann--Whitney $W = 5.5$, $p = 0.8248$)
%impact of env on success: not significant (Kruskal--Wallis $\chi^2 = 4.7059$, $\mbox{df} = 2$, $p = 0.09509$)

%\begin{figure}[t]
%\centering
%\includegraphics[width=.5\textwidth]{warning.png}
%\caption{
%A screenshot of the interface with the ``Copy Tor Log to Clipboard'' button, 
%which appears silently and does not interrupt the progress bar. 
%This warning was generated by entering in syntactically correct but invalid proxy settings,
%a mistake that prevents users from ever connecting to the Tor network. 
%Users are never directly notified of this error through an error message or a timeout message.
%Our participants made this error during our experiments, along with others that they were not notified about. 
%}
%\label{fig:warning}
%\end{figure}

%\begin{figure}[t]
%\centering
%\includegraphics[width=.5\textwidth]{log-messages.png}
%\caption{
%The last 24 of 45 log lines that users receive after clicking clicking the ``Copy Tor Log to Clipboard'' button. 
%These log lines were the result of entering in syntactically correct but invalid proxy settings,
%a mistake that prevents users from ever connecting to the Tor network. Understanding the Tor logs require
%technical expertise from the user to understand the logs, diagnose the problem, and formulate next steps.
%}
%\label{fig:warning_log}
%\end{figure}
%
%We believe that the added advice on what to try next on error messages would have improved the rate of success. However, only 1 of 116 participants saw an error during the experiment. The old interface warned users on some mistakes (i.e. entering in a syntactically correct but invalid proxy settings) rather than displaying an error message. When a user receives a warning, a button that says ``Copy Tor Log to Clipboard'' silently appears at the bottom of the interface (Figure~\ref{fig:warning}). To see the log messages, users must click on the button, open up a text editor, and paste the log messages. The log messages require the user to understand the log, diagnose the problem, and formulate next steps (Figure~\ref{fig:warning_log}).
%
%That participant was using the new interface and was told that the bridge configuration was the source of the error. The participant heeded the interface's advice to reconfigure the bridge options. But since most participants did not see any error messages, any effects they may have had on success rates are not reflected in our results. The addition of a summary screen did cause behavioral changes (13\% of participants saw their current settings, then went back and adjusted them), but this behavioral change did not have a statistically significant impact on success rates. 

We added preemptive advice to the bridge configuration screen to first try an obfs3 bridge and then a meek bridge, but we suspect that most participants did not benefit from this advice since participants did not think to adjust their bridge settings upon failure. Of the 76 participants that failed to connect on the first attempt, 15 of 36 participants with the new interface and 13 of 38 participants with the old interface went back to the bridge screen and chose another hard-coded bridge. 10 of 15 in the new interface chose a meek bridge as their next bridge whereas 5 of 13 in the old interface chose meek as their next bridge, but we cannot claim that this is a direct result of our advice.

Table~\ref{tab:attempts-bridge-proxy} shows the configuration settings of the first successful connection in each environment and interface combination.We only consider the first successful connection since many of our curious participants tried many different settings to investigate if they will work, even after they had completed the task. Recall E1 does not require users to configure a bridge, E2 requires users to configure any bridge, and E3 requires users to configure a meek or custom bridge. Note that only four of the hard-coded bridges were used to connect successfully for the first attempt were the recommended bridge and the required bridges to succeed in E3.

Our participants did not optionally configure a bridge in E1 or configure a non-recommended bridge in E2. This suggests that users will not configure optional components or deviate from the recommended settings unless necessary. If the intent of the recommendation is to get as many users as possible to use the recommended bridge, this is a positive result. If the intent of the recommendation is to give pointers when users are stuck but allow the users to make their own bridge choices to diversify active transports, this is a negative result. 

Only two participants chose to configure a custom bridge. Both of these participants sent an incorrectly formatted request to the automatic bridge responder, which did not reply with custom bridges as a result. Appendix~\ref{failed-participants} shows the malformed requests. These two participants failed to connect to the Tor network. 

\begin{table}
\centering
% Generated by attempts.R, and manually reordered:
\begin{tabular}{r c c c c c c}
& \rotatebox{90}{E1-NEW} & \rotatebox{90}{E1-OLD} & \rotatebox{90}{E2-NEW} & \rotatebox{90}{E2-OLD} & \rotatebox{90}{E3-NEW} & \rotatebox{90}{E3-OLD} \\
no bridge, no proxy & 17 & 13 &  &  &  &  \\
obfs3, no proxy & 2 & 6 & 18 & 16 &  &  \\
meek-amazon, no proxy &  &  &  &  & 7 & 4 \\
meek-google, no proxy &  &  &  &  & 5 & 4 \\
meek-azure, no proxy &  &  &  &  & 1 & 1 \\
no bridge, 3rd-party proxy &  &  &  &  &  & 1 \\
DNF (did not finish) &  &  & 1 & 3 & 7 & 10 \\
\end{tabular}
\caption{
Bridge--proxy combinations that led to the first successful bootstrap
in each environment and interface.
Most E1 participants used a direct connection,
but a few tried a built-in obfs3 bridge.
All the E2 participants who succeeded,
did so with obfs3 (the recommended bridge type)---none tried
a different bridge before obfs3.
All of the successful E3 participants but one
used one of the meek bridges.
The remaining E3 participant succeeded in an unexpected way:
by searching the web for an open proxy and configuring it
as the proxy setting.
}
\label{tab:attempts-bridge-proxy}
\end{table}

\subsubsection{Time to Success} 
The median times to completion for participants of the new interface are less than those with the old interface (Table~\ref{table:participant-summary}). Non-finishing participants are assigned the maximum time of 40:08
for the purpose of computing the median. However, the difference between the medians times to success between new versus old interfaces, in aggregate and in censorship environment, are not statistically significant. The level of censorship, rather than the interface, had a significant impact on the time to success. The more difficult the censorship environment, the longer participants took to configure their connection (Kruskal--Wallis $\chi^2 = 80.926$, $\mbox{df} = 2$, $p < 10^{-15}$). The distribution of participants' time to success can be seen in Fig.~\ref{fig:time_to_success_clamped}.
%impact of version on time to success: not significant ($W = 1569$, $p = 0.07796$)
%impact of env on time to success : significant (Kruskal--Wallis $\chi^2 = 80.926$, $\mbox{df} = 2$, $p < 10^{-15})

\begin{figure}[t]
\centering
\includegraphics{time_to_success_clamped}
\caption{
Time to first success, by censorship environment and interface.
The dots show the raw completion times,
while the boxplots show the medians and interquartile ranges.
The ``DNF'' figures at the right show the number of participants 
who did not finish in the time allotted.
Here, non-finishing participants are assigned the maximum time of 40:08
for the purpose of computing the median.
}
\label{fig:time_to_success_clamped}
\end{figure}

\begin{figure}[t]
\centering
\includegraphics{time_to_success_active_clamped}
\caption{
Active-time configuration.
}
\label{fig:time_to_success_active_clamped}
\end{figure}

In our experiment, participants had 40 minutes to circumvent censorship. Fig.~\ref{fig:time_to_success_ecdf} shows the cumulative success rates over time. In practice, faster time to completion would mean more users will succeed, since users will give up after a while. Users in the wild will likely not be motivated to spend 40 minutes trying to configure Tor. If users were only willing to put in a minute or so of their time, users in intermediate and heavily censored environments would be unable to connect. Even if users were willing to dedicate 10 minutes to configuring their connection, most users in heavily censored environments would be unable to connect. Ideally, users should be able to connect to Tor within a few minutes, regardless of their censorship environment. We propose ideas on how to achieve this in section~\ref{recommendations}. 

\begin{figure}[t]
\centering
\includegraphics{time_to_success_ecdf}
	% Generated by info.R:
	\begin{tabular}{l r r r r}
	& \multicolumn{1}{c}{1.5~m} & \multicolumn{1}{c}{10~m} & \multicolumn{1}{c}{20~m} & \multicolumn{1}{c}{40~m} \\
	\noalign{\hrule}
	E1-NEW & 100\% & 100\% & 100\% & 100\% \\
	E1-OLD & 58\% & 100\% & 100\% & 100\% \\
	E2-NEW & 11\% & 79\% & 89\% & 95\% \\
	E2-OLD & 16\% & 68\% & 79\% & 84\% \\
	E3-NEW & 0\% & 25\% & 45\% & 65\% \\
	E3-OLD & 0\% & 20\% & 25\% & 50\% \\
	\end{tabular}
\caption{
Cumulative success rates over time, by censorship environment and interface.
We stopped participants after 40 minutes. Here, those who did not finish were assigned
an arbitrarily high number greater than 40 minutes for the purposes of plotting. 
For example, every E1-NEW participant finished within 90 seconds,
but only 58\% of E1-OLD had finished by that time.
After 10 minutes, 79\% of E2-NEW and 68\% of E2-OLD had finished.
After 20 minutes, 45\% of E3-NEW and only 25\% of E3-OLD had finished.
}
\label{fig:time_to_success_ecdf}
\end{figure}

\subsubsection{Active Configuration Time} 
We summarize each participant's actions throughout the experiment in Fig.~\ref{fig:all-participant-edges}. Each row in Fig.~\ref{fig:all-participant-edges} corresponds to a participant in our experiment. The bar represents a participants' path through the interface, illustrating time spent on each screen, transitions between screens, how many attempts were made, and if they were eventually successful. 

\begin{figure*}
\centering
% This is a manually edited version of the automatically generated
% all-participant-edges graphic. It is edited to have better scale labels for
% the treatments.
\includegraphics{all-participant-edges-scales}
\caption{
Summary of participants' actions throughout the entire experiment.
Different colors indicate which screen was shown at each moment.
The narrow black lines show the times when the configuration interface
was not running; i.e., a participant was doing something else
such as searching the web in another browser.
The overall length of the lines show the total time to completion,
except for those we cut off after approximately 40 minutes
(marked with a $\times$).
}
\label{fig:all-participant-edges}
\end{figure*}

The time to success was largely dominated by the time spent waiting to connect to Tor, rather than actively configuring the interface. Logs show that participants spent 58\% of their overall time at the progress screen. 
{\color {red} discuss by environment (time on first) and by version (proxy).}
Table ~\ref{table:median_time} shows the median percentage of time spent on each screen,
computed independently for each screen. 

We believe participants spent a long time on the progress screen for a combination of reasons. Even with correct configurations, the bootstrap process can take up to two minutes. With incorrect settings, we suspect that participants waited because the interface instructs them ``wait a couple minutes.'' A lack of error messages and timeouts on the progress screen, also caused some users to wait indefinitely. 

\begin{table}[t]
\centering
	\begin{tabular}{c r r r r}
	& First & Proxy & Bridge & Progress \\
	\noalign{\hrule}
	All & 7\% & 5\% & 4\% & 58\% \\
	E1-NEW & 28\% & 0\% & 0\% & 60\% \\
	E1-OLD & 30\% & 0\% & 0\% & 29\% \\
	E2-NEW & 5\% & 5\% & 5\% & 76\% \\
	E2-OLD & 7\% & 18\% & 8\% & 45\% \\
	E3-NEW & 3\% & 3\% & 5\% & 73\% \\
	E3-OLD & 2\% & 12\% & 6\% & 64\% \\
	\end{tabular}
\caption{The median percent of time participants spent on each screen, which is not
necessarily the median absolute time spent on that screen. 
This percentage independent for each screen; that is, a participant who spent the median percent 
of time on one screen may not be the same participant who spent the median percent
of time on other screens.} 
\label{table:median_time}
\end{table}

%\begin{table}[t]
%\centering
%	\begin{tabular}{c r r r r}
%	& First & Proxy & Bridge & Progress \\
%	\noalign{\hrule}
%	All & 5\% & 16\% & 6\% & 60\% \\
%	E1-NEW & 34\% & 4\% & 6\% & 50\% \\
%	E1-OLD & 23\% & 35\% & 9\% & 21\% \\
%	E2-NEW & 4\% & 3\% & 3\% & 58\% \\
%	E2-OLD & 4\% & 22\% & 4\% & 65\% \\
%	E3-NEW & 5\% & 6\% & 4\% & 64% \\
%	E3-OLD & 4\% & 25\% & 8\% & 56\% \\
%	\end{tabular}
%\caption{The overall percent of time all participants spent on each screen, computed by
%dividing the aggregate number of time on a screen by the aggregate time on all screens.} 
%\label{table:overall_time}
%\end{table}

\begin{table}
\centering
	\begin{tabular}{c r r}
	 & Total Active Minutes & Total \% of Overall Time \\
	\noalign{\hrule}
	All & 381 & 29\% \\ 
	E1-NEW & 4 & 45\% \\
	E1-OLD & 19 & 67\% \\
	E2-NEW & 15 & 15\% \\
	E2-OLD & 68 & 31\% \\
	E3-NEW & 74 & 18\% \\
	E3-OLD & 200 & 38\% \\
	\end{tabular}
\caption{active time {\color {red} add comparable figure to the time to success figure (Fig 9)}.} 
\label{table:active_time}
\end{table}

Perhaps a more meaningful measurement of time is the amount of time participants actively configured their connection. We define this as the time that participants spent interacting with the interface, excluding the time waiting for the connection to bootstrap. This is a simplified notion active configuration time. Some participants searched for help on the web after exiting the interface or on the progress screen. 

{\color {red} TODO: explain how this was calculated: across all participants with all of the new and all of the old aggregated, with DNF's getting 40:08 then subtracting the time they spent on the progress screen). Say it is mann whitney one tailed. } The new interface results a statistically significant reduction in the overall active configuration time. (Mann--Whitney $Z = -2.7$, $p = 0.0032$, $r= 0.25$). We believe that getting rid of the technical questions and telling participants that they did not need a proxy attributed to the reduction in time. 
%The impact of the environment on active time is significant (Kruskal--Wallis $\chi^2 = 51.978$, $\mbox{df} = 2$, $p = 10^{-11}$)

\subsection{Discussion} 
This section details general trends in user behavior, common failure cases, and our recommendations for 
improving the Tor configuration interface. 

\subsubsection{Reasons for Failure} 
Failure is common. 20\% (21 of 116) of participants were not able to successfully connect to Tor. 64\% (74 of 116) of first attempts to connect failed and 79\% (376 of 462) of total attempts to connect failed. Reasons for failure were determined by a combination of log processing (i.e. configuration settings on attempts) and video observation (i.e. observing what they searched for online). \\ 

\begin{description}
\item {\bfseries Only connected directly (7/21): P57, P74, P76, P90, P93, P108, P112} These participants tried a direct connection. When that failed, they tried the same configuration, over and over, no matter how many times they failed. It was common to restart the interface, check Internet settings, and wait between subsequent attempts. 
\item {\bfseries Didn't know what to do next (6/21): P91, P92, P95, P110, P113, P116} These participants in E3 did not know what to do next after a direct connection and a default obfs3 bridge connection. They often tried those configurations again or gave up. 
\item {\bfseries Thought that they needed a proxy (5/21): P75, P94, P107, P109, P115} After a couple failed attempts, these participants assumed that they needed a proxy. They spent the time trying to configure a proxy, usually without trying other bridges. 
\item {\bfseries Used the bridges auto-responder incorrectly (2/21): P96, P111} Two participants in our heavy censorship environment figured that the recommended bridge and most hard-coded bridges were not working and found the auto-responder through the help button. However, they all failed to get a response. For details, see Appendix~\ref{failed-participants}.
\end{description} 

We discarded data on participants who chose to download their own version of Tor Browser online. 5 participants downloaded their own version without trying the provided one on their desktop, while others did so after feeling frustrated with the provided version. Appendix~\ref{tor-downloads} gives the unfortunate details of where Tor was downloaded when torproject.org was blocked.

\subsubsection{Observations}
We noticed several behavioral patterns in our participants. These may or may not apply to the Tor user base.\\

\begin{description}
%connect vs configure
\item {\bfseries Users try the easy path first.} Users try the easy option of connecting directly to the Tor network first. This leaks to network eavesdroppers leaking that they are connecting to Tor.  81\% (94 of 116) of first attempts were to connect directly, 86\% (50 of 116) from the new interface and 76\% (44 of 116) from the old interface.

% impacts of making the proxy page ``automated'' 
\item {\bfseries Users wasted time configuring proxies.} This confusion prevented users from configuring their bridges correctly. Participants with the new interface (which explicitly states that they did not need a proxy) spent 31\% of their active time configuring proxies, perhaps due to not reading the text or not believing the interface. Participants in the old interface spent 63\% of their time on the proxy screen. We do not understand why users with the new interface chose to configure proxies after explicitly being told that they do not need one.

% impacts of giving people advice on which transport to choose.
\item {\bfseries The interface has a large influence on the bridges chosen.}
Participants in E3 were required to choose a particular subset of hard-coded bridges, none of which was the default bridge. After the default bridge, the most chosen bridge was the one listed first in the drop-down menu. Many bridges listed at the end of the drop-down menu were not chosen. We tried to help users by providing instructions on which bridges to choose if the default fails, but it is unclear if this advice helped. 66\% (10 of 15) participants with the new interface and 38\% (5 of 13) participants with the old interface chose meek as their second bridge.

%error messages
\item {\bfseries People saw (almost) no error messages.} Many waited for minutes at the progress screen, but never saw an error message. Error messages are intended to appear after a timeout. There were warnings, but those warnings went largely unnoticed by our participants. Across both versions of the interface, only one participant ever saw an error message. We tried to make error messages more instructive and understandable, bu since participants in our experiment did not encounter error messages, we cannot evaluate their efficacy. 

% progress bar
\item {\bfseries People waited a long, long time at the progress bar.}
From watching the screen capture videos, we see that some participants dutifully followed the directions to wait, while others are who are uncertain wait without taking additional actions.
\end{description} 


\subsubsection{Recommendations}
\label{recommendations}
Based on our observations of general behavioral trends and common failure cases, we make the following recommendations to increase success rate and decrease overall time spent in the interface: \\

\begin{description}
\item {\bfseries Automate configuration after failure.} After one unsuccessful attempt, a user has already leaked to network eavesdroppers leaking that they are connecting to Tor. Automating the configuration process thereafter will have no increase in risk. This will specifically help users that will never try to configure their connection (the most common failure case) to succeed and drastically reduce the time spent for the 64\% of participants who failed their first attempt. Users in more comprehensive censorship environments are more likely to benefit from this, as 5\% of participants in the mild censorship environment, 84\% participants in intermediate censorship environment, and 100\% of participants in the heavy censorship environment failed the first time.
\item{\bfseries Hide infrequently used options.} Telling users they did not need a proxy was not enough to deter users from configuring a proxy. Only a small fraction of the Internet population requires a proxy to connect to the Internet. Hiding the proxy screen by default and only showing it after it has been detected as necessary might improve the user experience focusing user effort on configuring bridges.
\item {\bfseries Be explicit about recommendations.} Many do not know what to do after the recommended bridge failed. The interface should mark which bridges have been tired before and recommend the user to try another bridge. (i.e. After a user tried an obfs3 bridge, the interface updates its recommendation to a meek bridge and mark the obfs3 bridge with an ``X''.)
\item{\bfseries Set a timeout on the progress bar.} Informing users that they have failed earlier will decrease the overall time to success, create an opportunity to give suggestions, and reduce user frustration. 
\item{\bfseries Have a user-tolerant bridge auto-responder.} The bridge auto-responder responds to user requests for custom bridges. Users can make this request by emailing bridges@torproject.org with a non-empty title and ``get bridges'' in the body. Both of our users who tried to get custom bridges this way failed to format their request correctly. Having the auto-responder respond with bridges as a default or recovering from common errors (such as typing ``get bridges'' in the subject line) may help users succeed. 
\end{description} 

We recommend best practices, such as providing a summary screen to let the user know the configuration settings before connecting, and having a progress bar that gives users feedback on what network component has failed.

\section{Limitations} 
The interface was only tested on Windows machines. The configuration interface uses the native operating system's elements and their respective styling, so an interface looks slightly different across different operating systems. Participants who are not accustomed to using Windows machines may have been slower than usual to complete the given task, but this should affect all of our conditions equally. 

We refreshed a list of Tor relay IP addresses and added them
to a firewall blacklist before each session.
In the first study, we neglected to block the IP addresses
of the Tor directory authorities, which are the first hosts
a client contacts when initiating a non-bridge connection.
This, combined with new relays appearing in the network on an hourly basis,
enabled a small number of participants to succeed with
a direct connection when we expected them to fail.
We believe this is acceptable because 
the first study was not used to quantify failures or successes, 
but to explore possible problems.
We fixed this problem in our second study by blocking the directory authorities.

%We blocked en.wikipedia.org, the target of the experiment,
%as well as other language-specific subdomains such as
%de.wikipedia.org and fr.wikipedia.org.
%We neglected, however, to block the Simple English Wikipedia
%at simple.wikipedia.org, which one participant found,
%thinking they had completed the task.
%% E2-OLD-X04-20160330-181928

Our study was conducted in a laboratory setting, which can cause our participants to be under or over-motivated. Our participants had a monetary incentive to connect to Tor, whereas a real user in a censored environment would want to reach a particular website or service. The nature of the experiment places social pressure to attempt connect for the whole duration of the session, whereas participants may have given up earlier if they were not in a real-world setting.   

We chose to focus on more common cases, and did not simulate environments that requires users to configure a custom bridge or proxy. Although users in the wild can download interfaces that are not in their native language, we know how often this happens. We tested the English version of the Tor interface on English speaking participants. 

\section{Future Work} 
We collaborated and communicated with Tor developers throughout the qualitative user study, redesign of the interface, and the quantitative user study. Redesigning the configuration interface was a mutual interest. In fact, Tor version~4.5 incorporated textual and navigational changes based on our redesigned interface. We plan to work with Tor developers to integrate helpful changes. This process will entail debugging our code, merging changes with the current version of Tor, making high-fidelity graphics that align with style guides, and finalizing the advice to give to users in the interface. 

We took an approach that optimized for the average case user manually configuring a connection. Additional user studies that focus specifically on users in heavily censored environments or increasing the amount of automation in the configuration process may yield higher rates of success and faster time to success. We list 3 approaches that can seem worth exploring. \\

\begin{description}
\item{\bfseries Automate the configuration.} One naive way to automate the process users should take, trying the most likely configurations to work in order. This process leaks to network eavesdroppers that the user is connecting to the Tor network, but this would not harm users today (as far as we know). Our study finds that 64\% users fail on the first try when trying to circumvent an advanced censor. However, further research can explore if and how much increased risk is associated with this approach. 
\item{\bfseries Ask about the risk.} Automating the configuration process for all who are not at risk and offering manual configuration to those who would like to be more cautious is an alternative to complete automation. The complication with this approach is that we would need to ask the users whether they would be at risk if someone learned that they are connecting to the Tor network. Users may not be qualified to answer this question or may not trust Tor with this information. 
\item{\bfseries Ask if users know what to do.} Automating the process for users who do not know how to configure a bridge or proxy could be an alternative option. However, there are ethical implications of making mistakes on behalf of users at risk.
\end{description}

We believe that automation, asking about risk, and identifying struggling users could enable significant improvements to the configuration process. 

\section{Conclusion} 
We conducted a series of experiments to improve the Tor Browser 5.0.3 configuration interface, focusing on users who use Tor to circumvent censorship. We interviewed 16 pre-screened participants about their experience trying to circumvent mild, intermediate, and heavy censorship with the current interface, giving insight into common challenges in configuring Tor. We discovered multiple challenges: users are confused about who to configure bridges and proxies, a progress bar bug that causes users to falsely assume that a (valid) configuration is faulty, and users have a hard time figuring out what to do after their first attempt to connect fails.

We used this feedback to guide the redesign of the configuration interface. We test the impact of our changes on 116 participants. We found that the changes cause a statistically significant reduction in the time participants spent configuring their connection, with reduction in success rates. {\color {red} TODO: add more here.} Our analysis suggests ways to improve the Tor interface as well as some potential opportunities for further research.

\section {Resources} 
For additional details, such as the censorship simulation code, interview transcriptions, and logs of participant interactions, we refer you to the project repository: \\

\noindent \url{https://github.com/lindanlee/circumvention-ux-tor}

\section {Acknowledgments}
I want to especially thank Rowilma del Castillo of Xlab for supporting the experiment, assisting with testing, and being flexible with non-Xlab recruiting. I have received much valuable feedback from Nima Fatemi, Isabela Bagueros, Georg Koppen, and the Tor UX team. 

\bibliographystyle{abbrv}
\bibliography{pets2017-paper}

\appendix
\section{Participant Worksheet Text} 
\label{participant-worksheet}
Imagine you live in an oppressive country that censors part of the Internet. We have simulated this in the laboratory by blocking certain websites and services. The purpose of this experiment is to evaluate the use of Tor browser, which is a browser that can circumvent censorship and let you visit blocked websites. For instance, www.torproject.org is blocked. Check this by going to the site on a standard browser, like Firefox, Chrome, or Internet Explorer. It will fail to load, when you can visit other sites.

To complete this worksheet, you will need to set up Tor browser (on your desktop) correctly and use it to get to blocked site. If you can visit wikipedia, then you know that you have successfully circumvented censorship.

\section{Qualitative User Study Recruitment Posting} 
\label{qualitative-recruitment}
We are recruiting participants for an in-person research study at the University of California, Berkeley. You will need to come in to our lab and perform tasks on a computer for an hour or less. You will be compensated \$30 for participating. 
No special knowledge and no technical experience is required. If you are interested, fill out the survey at \textit{<survey link>}. 

\section{Qualitative User Study Prescreening Survey} 
\label{qualitative-prescreening}
We are recruiting participants for an in-person research study at the University of California, Berkeley. You will need to come in to our lab and perform tasks on a computer for an hour or less. You will be compensated \$30 for participating. No special knowledge and no technical experience is required.\\

\begin{enumerate}
\item{Please select when you are available. We will assign you an hour experiment time slot during one of those times.}
\item{I am able to provide my own transportation to the University of California, Berkeley campus.}
\item{Thank you for your interest! Please provide an email address where we can contact you to share more logistical details.}
\item{we are looking for a very small number of participants, so unfortunately, we may not be able to accommodate everyone who applies. Would you like us to let you know about future opportunities?}
\item{What is your gender?}
\item{What is your age?}
\item{Please select your highest completed (or current) level of education.}
\item{What is your occupation?} 
\item{Do you speak any languages other than English fluently?}
\item{If you have a personal computer, what kind do you use?}
\item{Which of the following terms have you heard of? \textit{<answer choices: a checkboxlist of the the following terms: malware, proxy services, phishing, SSL, X.511 certificates, Tor>}}
\item{How often do you use the following software or features? \textit{<answer choices: a grid of radio buttons. Software/features (rows): HTTPS on web pages, proxies or other censorship circumvention tools, virtual private networks (VPN), file or whole-disk encryption, anonymity systems (e.g., Tor), email encryption (e.g., PGP), chat or instant messaging encryption, voice communication encryption. Frequency (columns): never, less than once a month, a few times a month, several times a week, daily.>}}
\end{enumerate}
Thank you for filling out this form. You are now done!

\section{Qualitative User Study Introduction Script} 
\label{qualitative-script} 
Imagine you live in an oppressive country that censors part of the Internet. We have simulated this in the laboratory by blocking certain websites and services.  The purpose of this experiment is to evaluate the use of Tor browser, which is a browser that can circumvent censorship and let you visit blocked websites. Currently, torproject is blocked (you can check this by going to torproject.org on a standard browser, like Firefox, Chrome, or Internet Explorer). 

To circumvent censorship successfully, you will need to set up Tor browser correctly and use it to get to Wikipedia. If you are able to reach the website, then you know that you have successfully circumvented censorship. Fill out the question on the worksheet. This isn't intended to be hard, just write what you see. We want to just check you saw the website. 

Before you start, do you have any questions about what you are asked to do? 

\section{Post-Experiment Standard Interview Questions}
We asked our participants these questions after they were given time to configure Tor Browser. \\

\begin{enumerate}
\item{Can you talk us through what you did along with what you were thinking at the time?}
\item{What was most challenging part of connecting?}
\item{Were there any unfamiliar terms?}
\item{How did you decide which options to choose?}
\item{What did you think about using Tor?}
\item{What is one change you would recommend?} 
\item{Did you need any additional information?} 
\end{enumerate}  

In addition to these questions, we asked our participants about specific questions based on their observation, usually regarding a specific choice in action, a particular screen they seemed stuck on, and any errors they encountered during the configuration process. 

\section{Quantitative User Recruitment Posting}
\label{quantitative-recruitment}
We are recruiting up to 40 participants for a user study at UC Berkeley. The experiment will involve basic Internet browsing tasks. You are not eligible if you have participated in our previous sessions.\\

\indent Payment: \$30 Amazon gift card\\
\indent Duration: 1 hour \\
\indent Where: Xlab at Hearst Memorial Gymnasium\\

\textit{<list of sessions>}\\

To be eligible, you must be an adult (18 or older). This is to comply with university policies on research. 

If you are interested: 1. Email lnl@berkeley.edu with the sessions you are able to attend. We will confirm your participation and assign you a session. 2. Come to Xlab at the appointed time for the experiment.

\section{Quantitative User Study Introduction Script} 
\label{quantitative-script} 
Imagine you live in an oppressive country that censors part of the Internet. We have simulated this in the laboratory by blocking certain websites and services.  The purpose of this experiment is to evaluate the use of Tor browser, which is a browser that can circumvent censorship and let you visit blocked websites. Currently, torproject is blocked (you can check this by going to torproject.org on a standard browser, like Firefox, Chrome, or Internet Explorer). 

To circumvent censorship successfully, you will need to set up Tor browser correctly and use it to get to Wikipedia. Tor is already installed for you. On the desktop, you should see a globe icon that says ``Start Tor Browser.'' If you are able to reach the website, then you know that you have successfully circumvented censorship. Fill out the question on the worksheet. This isn't intended to be hard, just write what you see. We want to just check you saw the website. 

Afterward, we ask you to take a short survey to collect some information about you. The link is also on your worksheet.
We will give you time to complete this task. If you finish early, we ask that you sit at your desk until the remainder of the hour. Since we are recording your screen, we ask that you don't do anything personal afterward, like checking your email.

Before you start, do you have any questions about what you are asked to do? 

\section{Quantitative User Study Exit Survey} 
\label{quantitative-exit-survey}
We'd like to know more about you.  All of your answers will be stored separately from any identifying information in order to protect your confidentiality.

This survey is part of a research project being conducted by the University of California, Berkeley. If you have any questions about your rights or treatment as a research participant in this study, please contact the University of California at Berkeley's Committee for Protection of Human Subjects at 510-642-7461, or email subjects@berkeley.edu. If you agree to participate, please click Next below.\\

\begin{enumerate}
\item{What is your participant ID? (This can be found on the sticker on the left hand corner of the desk you are currently sitting at.)}
\item{What is your gender?}
\item{What is your age?}
\item{Please select your highest completed (or current) level of education}.
\item{What is your current occupation?}  
\end{enumerate}

Thank you for participating in our experiment. You are now done! Please sit at your desk for the remainder of the experiment. Our researchers will formally announce the end of the experiment. 

\section{Custom Bridge Attempts} 
\label{failed-participants}

\begin{figure}[h]
\includegraphics[width=0.5\textwidth]{../experiment/processing/failed-participants/20160325-140813-bridgeresponder-redacted.png}
\caption{The message that P96 attempted to send to the bridge auto-responder. The message was sent to the wrong address: bridges@bridges.torproject.org instead of bridges@torproject.org.}
\label{autoresponder1}
\end{figure} 

\begin{figure}[h]
\includegraphics[width=0.5\textwidth]{../experiment/processing/failed-participants/20160328-133857-bridgeresponder-redacted.png}
\caption{The message that P111 accidentally sent to the helpdesk rather than the bridge auto-responder. The participant should have used the address bridges@torproject.org, not help@rt.torproject.org. Since the helpdesk address is not an auto-responder, there was no reply.}
\label{autoresponder2}
\end{figure} 

\section{Tor Downloads}
\label{tor-downloads}

Participants that downloaded Tor Browser (5/124): 
\begin{itemize}
\item P57 (Fig.~\ref{techspot})
\item P91 (Fig.~\ref{softsonic})
\item P117, data not used (Fig.~\ref{mirror})
\item P118, data not used (Fig.~\ref{downloadio})
\item P119, data not used (Fig.~\ref{driverupdate})
\end{itemize} 

%Sources of downloads: 
%\begin{itemize}
%\item {\bfseries techspot.com} $\rightarrow$ {\bfseries 1download.io}: an advertisement in the Yahoo search results for ``tor browser downloads''.
%\item {\bfseries driverupdate.net}: the fifth Google search result for ``tor browser download''.
%\item {\bfseries www.torservers.net/mirrors}: the first google search result for ``tor browser mirror''.
%\item {\bfseries techspot.com}: the fifth Google search result for ``tor browser download''.
%\item {\bfseries softsonic.com}: the second Yahoo search result for ``tor browser''.
%\end{itemize}

\begin{figure}[h]
\includegraphics[width=0.5\textwidth]{../experiment/processing/bad-participants/X10-20160323-132505-1downloadio.png}
\caption{P118 attempted to download Tor Browser from TechSpot.com, but clicked on
a download link which was not from TechSpot.com. The download was from another site, 1download.io.}
\label{downloadio}
\end{figure} 

\begin{figure}[h]
\includegraphics[width=0.5\textwidth]{../experiment/processing/bad-participants/X28-20160328-134111-driverupdate.png}
\caption{P119 downloaded Tor Browser from DriverUpdate, a suspicious source. Two executables
are downloaded, and the website instructs the user to run an executable named ``DriverUpdate-setup.exe,'' which the
participant dutifully does before running the Tor Browser executable.}
\label{driverupdate}
\end{figure} 

\begin{figure}[h]
\includegraphics[width=0.5\textwidth]{../experiment/processing/bad-participants/X32-20160328-134531-mirror.png}
\caption{P117 downloaded Tor Browser from a legitimate Tor Browser mirror, \url{www.torservers.net/mirrors}.}
\label{mirror}
\end{figure}

\begin{figure}[h]
\includegraphics[width=0.5\textwidth]{../experiment/processing/bad-participants/20160323-133257-techspot.png}
\caption{P57 downloaded Tor Browser from TechSpot, clicking on the download link from 
TechSpot (the white ``Direct Download'' button). X10-20160323-132505 in Fig.~\ref{downloadio} clicked the blue ``Download Now'' button and downloaded from a different source.}
\label{techspot}
\end{figure}

\begin{figure}[h]
\includegraphics[width=0.5\textwidth]{../experiment/processing/bad-participants/20160330-161511-softsonic.png}
\caption{P91 downloaded Tor Browser from Softsonic, a reputable-looking but
unconfirmed site.}
\label{softsonic}
\end{figure}



\end{document}
